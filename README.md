# Mon blog en php

Comme vous pouvez le voir en [vous abonnant](http://laurent.claessens-donadello.eu/rss.xml), mon blog est extrêmement minimaliste. Entièrement fait à la main en html.

J'ai donc décidé de «moderniser» ça comme exercice de `php` ... travail en cours ...

## Installation

### Chez moi

Pour mémoire ...

Pour avoir la liste des anciens articles, il faut lire le fichier `rss.xml`. Pour ce faire j'utilise la fonction 
```php
 simplexml_load_file(  );
```
Je ne me souviens plus quel paquet il faut installer pour l'obtenir. Je crois un de ceux-ci :
```bash
apt install php-pear  libpcre3-dev
```

Ensuite redémarrer le server Apache :
```bash
sudo service apache2 restart
```

Then my website is at `htpp://localhost`

### Sur mon site

Il se fait que mon hébergeur OVH a du bon php, et que je n'ai rien dû faire de spécial, à part activer php7 à partir de l'interface web de mon compte OVH.

## Directory structure

The directory `blog` contains the following :

* `html`. Contains the text written by the author. These files are automatically included by the `php` scripts that are the "real" blog files.
* `php`. Contains the php files describing the articles. These files are automatically generated by a python script on the author side.
* `src`. Contains the php classes and functions for generating the pages.

## Workfow

From the author point of view, non `php` is needed, but few python and html. In the file `ArticleList.py` the author adds an entry by
```python
new_article=ArticleSummary(name="name")
new_article.set_title("My title")
new_article.set_date("December 2016")
new_article.set_description("Some description")

blog=Blog("rss.html")
blog.add_article(new_article)
```
where `name` is the name of the `html` file in which the author writes his article :
```bash
blog/html/name.html
```

A `php` file is automatically created :
```bash
blog/php/name.php
```
and the file `rss.xml` is updated.

Now you can publish by copying the three files `rss.xml`, `name.html` and `name.php` on your website.

You can see the result [here](http://localhost/laurent/blog/php/climat_et_technologie.php).

## Deploy

After a deploy, the result can be previewed at
```
http://localhost/laurent/blog/php/Ne pas utiliser les pistes cyclables.php
```
